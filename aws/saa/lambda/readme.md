# AWS Lambda関数
はサーバーレスでプログラムのコードを実行できるフルマネージドサービス。

## 特徴
* サーバーレス
  * インフラストラクチャの管理は完全にAWSによって行われる
* Lambda関数の実行時間は1回につき最長15分
* リクエスト数に基づく課金と実行時間（単価はメモリ量に依存）に基づく課金の合計

## メリット
* プログラム実行環境の構築や運用が不要になる
* 耐障害性・可用性の向上
  * プログラムはリージョン内の複数のAZに分散して配置される
* 拡張性の向上
  * プログラムへのリクエスト数に応じたスケーリングが自動的に行われる

## 関数のトリガー
### 例
* Amazon S3バケットにオブジェクトが作成された時
* Amazon DynamoDBのテーブルに変更があった時
* Amazon SQSのキューにメッセージが追加された時
* Amazon SNSからトピックが通知された時
* Amazon API Gateway経由で直接Lambda関数が呼び出された時

## アクセス権限
Lambda関数には実行ログを出力するために、CloudWatch Logsへのアクセス権限が割り当てられている。  
デフォルトではCloudWatch Logs以外へのアクセス権限はない。

Lambda関数のアクセス権限は、他のAWSサービスへのアクセス権限を持つIAMロールによって付与する。


## 暗号化ヘルパー
Lambda関数で使用する環境変数（APIキー、データベースの認証情報、アクセスキーなど）に対して、AWS KMSを使用して暗号化し、実行時に復号して利用するためのツール。

※ AWS Key Management Service（KMS）  
暗号化に使用する鍵（キー）を作成・管理するサービス。  
暗号化ヘルパーはKMSを利用してデータを暗号化し、安全に管理することができる。


## VPCアクセス
作成したLambda関数はLambda専用のセキュアなVPCに配置される。このLambda専用のVPCからは、インターネットや、インターネットを経由してパブリックサブネット内のAWSリソースにはアクセスできるが、プライベートサブネット内のAWSリソースへはアクセスできない。  
参考：vpc_access_1.jpeg

Lambda関数からプライベートサブネット内のAWSリソースへアクセスさせたい場合は「VPCアクセス」の設定する。VPCアクセスではアクセスしたいAWSリソースのあるVPCやサブネットの選択と、Lambda関数のセキュリティグループを設定する。VPCアクセスを設定するとLambda関数がサブネット毎に接続用のENI（Elastic Network Interface）を作成して、プライベートサブネット内のAWSリソースへアクセスする。  
VPCアクセスを設定したLambda関数は、ENIを作成したサブネットへアクセスできるようになる代わりに、インターネットへアクセスできなくなる。  
