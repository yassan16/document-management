# Amazon DynamoDB
Key-Value型のNoSQLデータベース。  
ミリ秒単位の応答が可能で、リアルタイムアプリケーションなどに利用

## 特徴
* 高可用性
* キャパシティ
* データ参照時の一貫性
* 自動スケール
* 更新ログの保存機能
  * Streams、Time To Live（TTL）機能

## キャパシティ
DynamoDBでは、テーブルに対する書き込み・読み込みの量と利用料金が関係しています。
* オンデマンドモード
  * 書き込み・読み込みのリクエスト単位で利用料金がかかる
* プロビジョニングモード
  * 1秒間に行う書き込み・読み込みの量で利用料金が異なる

プロビジョニングモードの書き込み・読み込みは、「キャパシティユニット」という単位で管理されています。これは1秒間にどれだけ読み込み・書き込みを行うかを予約する設定で、容量が大きいほど料金がかかります。

## S3へのエクスポート
DynamoDBでは、既存のテーブルデータを任意のS3バケットに直接エクスポートする機能が提供されている。  
 → ユーザはこの機能のために独自のアプリケーションを用意したり、追加のコードを記述したりする必要はない。  
また、この機能を使用したデータのエクスポートでは、対象のテーブルに設定されたRCU*1を消費せず、テーブルの可用性やパフォーマンスにも影響を及ぼさない。

なおこの機能は、内部的にDynamoDBの継続的バックアップの機能（ポイントインタイムリカバリの前提となる機能）を使用しているため、対象のテーブルのポイントインタイムリカバリを有効にしておく必要がある。

*1 RCUとは？  
Read Capacity Unit（リードキャパシティユニット）  
1秒間にどれだけ「読み取り」できるかを表す単位のこと。

## グローバルテーブル
DynamoDBテーブルを複数のリージョンにまたがって運用できるサービス。  

ユーザーは地理的に近いリージョンのDynamoDBテーブルへ高速な読み込みと書き込みが可能になり、指定したリージョンにDynamoDBテーブルが自動的にレプリケートされる。  
データのレプリケーションは通常1秒以内に完了し、リージョン間のデータ冗長化によって高可用性が確保される。

## 更新ログ保存機能（DynamoDB Streams）
DynamoDB Streams（ストリーム）とは、テーブルに対して行われた直近の24時間の変更（追加や更新、削除）をログに保存する機能です。ストリームを参照することによって、いつ誰がどのようにテーブルを更新したかがわかります。  
ログには、アプリケーションがリアルタイムにアクセスできるため、変更内容に応じて処理を組み込むことができます。例えば、ログを監視し問題のある処理があった場合はアラートを上げさせたり、プロフィール画像を更新（追加）したらフレンドに通知させるというような運用が可能です。

なお、DynamoDB Streamsは非同期で動作するため、ストリームを有効にしても元のテーブルのパフォーマンスには影響を与えません。

また、DynamoDBはAWS Lambdaと統合されているため、Lambda側のトリガーを使用することで、独自のアプリケーションを用意したり、追加のコードをすることなく連携させることができます。

## DynamoDB Accelerator（DAX）
DynamoDB Accelerator（DAX）は、DynamoDBのインメモリのキャッシュクラスタです。  
DAXを利用することにより、ミリ秒（千分の一秒）だったレスポンスをマイクロ秒（百万分の一秒）レベルのパフォーマンスにまで向上させることができます。

キャッシュを利用して読み込みは高速化できますが、書き込みは高速化できない。

### 例
DynamoDB Accelerator（DAX）を対象のテーブルに対して設定し、キャッシュであるDAXからデータを取得することでDynamoDBデータベースへのアクセス回数が減少し、読み取り遅延を解消できます。
