# requirements.md テンプレート

## 概要

このファイルは、SDD（仕様書駆動開発）の要件定義フェーズで使用する `requirements.md` の **実用テンプレート** です。プロジェクトの `specs/requirements.md` としてコピーし、各セクションを記入してください。

書き方の詳細な解説やアンチパターンについては、[要件定義フェーズガイド（01-requirements.md）](./guide.md) を参照してください。

## 目次

- [使い方](#使い方)
- [テンプレート（Medium - 推奨）](#テンプレートmedium---推奨)
- [テンプレート（Small - 個人プロジェクト向け）](#テンプレートsmall---個人プロジェクト向け)
- [テンプレート（Large - ステークホルダー合意向け）](#テンプレートlarge---ステークホルダー合意向け)
- [参考: 記入のコツ](#参考-記入のコツ)

---

## 使い方

### 1. 規模を選ぶ

| 規模 | 対象 | 特徴 |
|---|---|---|
| **Small** | 個人プロジェクト・1人開発 | 最小限の記述で素早く着手 |
| **Medium（推奨）** | 2〜5人のチーム開発 | バランスの取れた標準テンプレート |
| **Large** | ステークホルダーとの合意が必要なプロジェクト | 詳細な記述でフォーマルレビューに対応 |

### 2. テンプレートをコピーする

該当する規模のテンプレートセクションをコピーし、プロジェクトの `specs/requirements.md` に貼り付けてください。

### 3. 各セクションを記入する

`<!-- ... -->` のコメントに従って記入してください。記入が終わったらコメントは削除して構いません。

### 4. Gate1 チェックリストで確認する

テンプレート末尾のチェックリストで品質を確認し、全項目を満たしたら設計フェーズに進みます。

---

## テンプレート（Medium - 推奨）

2〜5人のチーム開発向けの標準テンプレートです。全セクションを記載し、非同期レビューで合意をとります。

````markdown
# [プロジェクト名] — requirements.md

## プロジェクト概要

### 一文サマリ

<!-- このプロジェクトが何かを1文で説明する -->
<!-- 例: シンプルで使いやすいWebベースのTodo管理アプリケーション -->

### 背景・課題

<!-- なぜこのプロジェクトが必要なのか。現状の問題点を記述する -->
<!-- 例: チームメンバーがそれぞれ異なるツールでタスクを管理しており、進捗の共有が困難 -->

### 対象ユーザー

<!-- 誰がこのプロダクトを使うのか。ペルソナや利用状況を記述する -->
<!-- 例: 5人程度の小規模チームのメンバー。ITリテラシーは一般的なレベル -->

## ゴール / 成功指標

### ゴール（3つ以内）

<!-- プロジェクトが達成すべきゴールを箇条書きで記述する -->
<!-- ポイント: 測定可能で具体的なゴールにする。「使いやすい」は NG -->

-
-
-

### 成功指標

<!-- ゴールの達成度を測定可能な指標で定義する -->

| 指標 | 目標値 | 測定方法 |
|---|---|---|
|  |  |  |
|  |  |  |

## ユーザーストーリー一覧

<!-- Who（誰が）/ What（何をしたいか）/ Why（なぜか）を具体的に書く -->
<!-- 「ユーザー」は具体的な役割で書く（管理者、登録済みユーザー、未登録の訪問者 など） -->
<!-- 「理由」がトートロジー（同語反復）にならないように注意 -->

| ID | ユーザー（Who） | やりたいこと（What） | 理由（Why） | 優先度 |
|---|---|---|---|---|
| US-01 |  |  |  | Must |
| US-02 |  |  |  | Must |
| US-03 |  |  |  | Should |
| US-04 |  |  |  | Could |

<!-- 優先度の定義（MoSCoW法）:
  Must   = リリースに必須。これがないとプロダクトが成立しない
  Should = 重要だが必須ではない。ないと不便だが回避策がある
  Could  = あれば嬉しい。余裕があれば対応
  Won't  = 今回はやらない。スコープ外に移動
-->

## 機能要件

<!-- 1〜3文で機能を説明する粒度で書く -->
<!-- 各機能に正常系・エラーケース・関連ストーリーを記述する -->
<!-- 技術的な実装詳細（JWT、bcrypt 等）は書かない → 設計フェーズへ -->

### FR-01: [機能名]

<!-- 1〜3文で機能を説明する -->

**正常系**:
**エラーケース**:
**関連ストーリー**: US-XX

### FR-02: [機能名]

**正常系**:
**エラーケース**:
**関連ストーリー**: US-XX

### FR-03: [機能名]

**正常系**:
**エラーケース**:
**関連ストーリー**: US-XX

## 非機能要件

<!-- プロジェクト規模に見合った基準を設定する。過剰にしない -->

| カテゴリ | 要件 | 基準 |
|---|---|---|
| パフォーマンス |  |  |
| セキュリティ |  |  |
| アクセシビリティ |  |  |
| 対応環境 |  |  |

## スコープ外

<!-- 「やらないこと」を理由とともに明示する -->
<!-- 将来対応するものは「v2で検討」、調査が必要なものは「要調査」と記載 -->

| やらないこと | 理由 |
|---|---|
|  |  |
|  |  |
|  |  |

## 用語集

<!-- ドメイン固有の用語があれば定義する。認識齟齬を防ぐため -->

| 用語 | 定義 |
|---|---|
|  |  |

## Gate1 レビューチェックリスト

<!-- 全項目を満たしたら設計フェーズに進む -->

- [ ] ゴールが明確で、3つ以内に絞られている
- [ ] 成功指標が測定可能な形で定義されている
- [ ] ユーザーストーリーにWho/What/Whyが揃っている
- [ ] ユーザーストーリーに優先度（Must/Should/Could）がついている
- [ ] 各機能要件に正常系とエラーケースが記述されている
- [ ] 非機能要件が定義されている
- [ ] スコープ外が理由とともに定義されている
- [ ] 技術的な実装詳細が混入していない（→ 設計フェーズへ）
- [ ] チームメンバーが読んで追加の質問なしに理解できる
````

---

## テンプレート（Small - 個人プロジェクト向け）

個人プロジェクト向けの軽量テンプレートです。自分自身への備忘録として最低限の要件を記述します。

````markdown
# [プロジェクト名] — requirements.md

## プロジェクト概要

<!-- 何を作るかを1文で書く -->

## ゴール

<!-- 達成すべきゴールを1〜2個書く -->

-
-

## ユーザーストーリー

<!-- 箇条書きで3〜5個。「〜として、〜したい（〜のため）」の形式 -->

-
-
-

## 機能要件

<!-- 機能名 + 1文の説明を箇条書きで -->

-
-
-

## スコープ外

<!-- やらないことを理由とともに箇条書きで -->

-
-

## Gate1 セルフチェック

- [ ] ゴールが1〜2個に絞られている
- [ ] ユーザーストーリーが最低3つある
- [ ] 各機能に1文以上の説明がある
- [ ] スコープ外が最低1つ定義されている
- [ ] 読み返して「何を作るか」が自分で理解できる
````

---

## テンプレート（Large - ステークホルダー合意向け）

5人以上のチームや、ステークホルダーとの合意文書が必要なプロジェクト向けのテンプレートです。フォーマルなレビューゲートを通過させます。

````markdown
# [プロジェクト名] — requirements.md

## プロジェクト概要

### 一文サマリ

<!-- このプロジェクトが何かを1文で説明する -->

### 背景・課題

<!-- なぜこのプロジェクトが必要なのか。現状の問題点を記述する -->

### ビジネス背景

<!-- 市場環境、競合状況、ビジネス上の動機を記述する -->
<!-- 例: 競合製品Xがシェア30%を占めており、差別化のために〜が必要 -->

### 対象ユーザー

<!-- 誰がこのプロダクトを使うのか。ペルソナや利用状況を記述する -->
<!-- 複数のユーザー種別がある場合は、それぞれ記述する -->

#### ペルソナ1: [ユーザー種別]

- 役割:
- 利用頻度:
- 技術レベル:
- 主な目的:

#### ペルソナ2: [ユーザー種別]

- 役割:
- 利用頻度:
- 技術レベル:
- 主な目的:

## ゴール / 成功指標

### ゴール（3つ以内）

<!-- プロジェクトが達成すべきゴールを箇条書きで記述する -->

-
-
-

### KPI

<!-- ゴールの達成度をKPIで定義する。測定方法と測定タイミングも明記する -->

| KPI | 目標値 | 測定方法 | 測定タイミング |
|---|---|---|---|
|  |  |  |  |
|  |  |  |  |
|  |  |  |  |

## ユーザーストーリー一覧

<!-- Who / What / Why に加え、受け入れ条件を記述する -->

| ID | ユーザー（Who） | やりたいこと（What） | 理由（Why） | 優先度 | 受け入れ条件 |
|---|---|---|---|---|---|
| US-01 |  |  |  | Must |  |
| US-02 |  |  |  | Must |  |
| US-03 |  |  |  | Should |  |
| US-04 |  |  |  | Could |  |

<!-- 優先度の定義（MoSCoW法）:
  Must   = リリースに必須。これがないとプロダクトが成立しない
  Should = 重要だが必須ではない。ないと不便だが回避策がある
  Could  = あれば嬉しい。余裕があれば対応
  Won't  = 今回はやらない。スコープ外に移動
-->

## 機能要件

<!-- 正常系・全エラーケース・エッジケースを網羅的に記述する -->

### FR-01: [機能名]

<!-- 1〜3文で機能を説明する -->

**正常系**:
**エラーケース**:
- ケース1:
- ケース2:

**エッジケース**:
- ケース1:

**関連ストーリー**: US-XX

### FR-02: [機能名]

**正常系**:
**エラーケース**:
- ケース1:
- ケース2:

**エッジケース**:
- ケース1:

**関連ストーリー**: US-XX

### FR-03: [機能名]

**正常系**:
**エラーケース**:
- ケース1:
- ケース2:

**エッジケース**:
- ケース1:

**関連ストーリー**: US-XX

## 非機能要件

<!-- 全カテゴリについて具体的な数値基準を設定する -->

| カテゴリ | 要件 | 基準 |
|---|---|---|
| パフォーマンス |  |  |
| パフォーマンス |  |  |
| セキュリティ |  |  |
| セキュリティ |  |  |
| 可用性 |  |  |
| スケーラビリティ |  |  |
| アクセシビリティ |  |  |
| 対応環境 |  |  |
| 対応環境 |  |  |

## スコープ外

<!-- 理由・代替手段・再検討時期を明記する -->

| やらないこと | 理由 | 代替手段 | 再検討時期 |
|---|---|---|---|
|  |  |  |  |
|  |  |  |  |
|  |  |  |  |

## 用語集

<!-- ドメイン固有の全用語を定義し、ステークホルダー間で合意する -->

| 用語 | 定義 | 備考 |
|---|---|---|
|  |  |  |
|  |  |  |

## Gate1 フォーマルレビューチェックリスト

<!-- Medium のチェック項目に加え、Large 固有の項目を含む -->
<!-- 全項目を満たし、PO / ステークホルダーの承認を得たら設計フェーズに進む -->

### 基本チェック（Medium相当）

- [ ] ゴールが明確で、3つ以内に絞られている
- [ ] 成功指標が測定可能な形で定義されている
- [ ] ユーザーストーリーにWho/What/Whyが揃っている
- [ ] ユーザーストーリーに優先度（Must/Should/Could）がついている
- [ ] 各機能要件に正常系とエラーケースが記述されている
- [ ] 非機能要件が定義されている
- [ ] スコープ外が理由とともに定義されている
- [ ] 技術的な実装詳細が混入していない（→ 設計フェーズへ）

### Large 追加チェック

- [ ] ビジネス背景と市場分析が記述されている
- [ ] KPIと測定方法が具体的に定義されている
- [ ] ユーザーストーリーに受け入れ条件が定義されている
- [ ] 全エラーケースとエッジケースが洗い出されている
- [ ] 用語集が定義され、ステークホルダー間で合意されている
- [ ] スコープ外に再検討時期と代替手段が記載されている
- [ ] PO / ステークホルダーの承認を得ている
````

---

## 参考: 記入のコツ

テンプレートを記入する際に役立つポイントをまとめます。詳細は [01-requirements.md](./guide.md) を参照してください。

### 優先度の定義（MoSCoW法）

| 優先度 | 意味 | 判断基準 |
|---|---|---|
| Must | リリースに必須 | これがないとプロダクトが成立しない |
| Should | 重要だが必須ではない | ないと不便だが回避策がある |
| Could | あれば嬉しい | 余裕があれば対応 |
| Won't | 今回はやらない | スコープ外に移動 |

### 機能要件の粒度

- **1〜3文で説明できる粒度** が適切
- 1文で足りない場合 → 機能を分割する
- 3文を超える場合 → 詳細を設計フェーズに委ねる
- 技術的な実装詳細（JWT、bcrypt、Redis 等）は書かない

### エラーケースの洗い出しフロー

各機能について、以下の順に検討してください。

1. **入力バリデーション**: 不正な入力値のエラーケースはあるか？
2. **認証・認可**: 未認証/権限不足のエラーケースはあるか？
3. **外部依存**: 外部サービス障害時のエラーケースはあるか？
4. **同時操作**: 競合（コンフリクト）時のエラーケースはあるか？

> 全てのエラーケースを要件定義で網羅する必要はありません。ユーザーに見えるエラーを中心に記述し、技術的なエラー処理は設計フェーズに委ねてください。

### スコープ外の書き方

- 理由なしの箇条書きは NG（後から「なぜやらないのか」が分からなくなる）
- 将来対応するものは「v2で検討」と記載
- 技術的に困難なものは「要調査」と記載

### よくあるアンチパターン

| パターン | 問題 | 対策 |
|---|---|---|
| 技術仕様の混入 | 設計の選択肢が狭まる | 「何を」だけ書き、「どう」は設計フェーズへ |
| 曖昧な要件 | AIが推測で実装する | 数値基準や具体的な動作を定義する |
| スコープ外の欠如 | スコープが際限なく広がる | 「やらないこと」を理由とともに明示する |
| 過剰な非機能要件 | 設計が不必要に複雑になる | 現在の規模に合った基準を設定する |
| ユーザー視点の欠落 | 優先順位が判断できない | ユーザーストーリーで「なぜ必要か」を書く |
